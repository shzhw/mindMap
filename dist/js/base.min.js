function closeMainMenu(n){$("#main_menu").animate({width:"0"},200)}function saveJm(n){var e=n.get_data("node_array"),o=e.meta.name,i=jsMind.util.json.json2string(e);jsMind.util.file.save(i,"text/jsmind",o+".jm")}function savePng(n){n.screenshot.shootDownload()}function getSelectResult(n,e){var o=-1;return $(n).each(function(n,i){$(i).hasClass(e)&&(o=n)}),o}function open_file(n,e){jsMind.util.file.read(e,function(e,o){var i=jsMind.util.json.string2json(e);i?n.show(i):alert("can not open this file as mindmap")})}$(function(n){var e,o,i={};e={container:"jsmind_container",theme:"default",editable:!0},i={meta:{name:"example",author:"hizzgdev@163.com",version:"0.2"},format:"node_array",data:[{id:"root",isroot:!0,topic:"中心主题"},{id:"easy",parentid:"root",topic:"子主题",direction:"left"}]},o=new jsMind(e),o.show(i),n("#jsmind_container").draggable({cancel:"jmnode"}),n(document).on("keydown mousewheel",function(n){var n=n||window.event;if(n.originalEvent.ctrlKey)return n.originalEvent.wheelDelta>0?o.view.zoomIn():n.originalEvent.wheelDelta<0&&o.view.zoomOut(),!1}).on("click","#resetZoom",function(){o.view.setZoom(1)}).on("click","#logo_icon",function(){return n("#main_menu").animate({width:"620"},200),!1}).on("click","#close_menu",function(n){closeMainMenu()}).on("click","body",function(){closeMainMenu()}).on("click","#main_menu",function(n){n.stopPropagation()}).on("mousedown","#save,#open",function(){return closeMainMenu(),!1}).on("click","#save_confirm",function(){var e=getSelectResult(".option","active");if(0==e)savePng(o);else if(1==e)saveJm(o);else if(-1==e)return void alert("请选择文件类型");n(this).parents(".modal").find(".close").click()}).on("click","#open_confirm",function(){var e=n("#toOpenFile")[0].files;if(e.length>0){var i=e[0];open_file(o,i)}else alert("请选择打开的目标文件");n(this).parents(".modal").find(".close").click()}).on("click",".option",function(){n(this).hasClass("active")?n(this).removeClass("active").find(".option_icon").removeClass("fa-check-square-o").addClass("fa-square-o"):n(this).addClass("active").find(".option_icon").removeClass("fa-square-o").addClass("fa-check-square-o")}).on("dblclick",function(){var n=o.get_selected_node();o.begin_edit(n)})});