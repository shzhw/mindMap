function closeMainMenu(e){$("#main_menu").animate({width:"0"},200)}function saveJm(e){var n=e.get_data("node_array"),o=n.meta.name,i=jsMind.util.json.json2string(n);jsMind.util.file.save(i,"text/jsmind",o+".jm")}function savePng(e){e.screenshot.shootDownload()}function getSelectResult(e,n){var o=-1;return $(e).each(function(e,i){$(i).hasClass(n)&&(o=e)}),o}function open_file(e){var n=$("#toOpenFile")[0],o=n.files;if(o.length>0){var i=o[0];jsMind.util.file.read(i,function(n,o){var i=jsMind.util.json.string2json(n);i?e.show(i):alert("can not open this file as mindmap")})}else alert("please choose a file first")}$(function(e){var n,o,i={};n={container:"jsmind_container",theme:"default",editable:!0},i={meta:{name:"example",author:"hizzgdev@163.com",version:"0.2"},format:"node_array",data:[{id:"root",isroot:!0,topic:"中心主题"},{id:"easy",parentid:"root",topic:"子主题",direction:"left"}]},o=new jsMind(n),o.show(i),e("#jsmind_container").draggable({cancel:"jmnode"}),e(document).on("keydown mousewheel",function(e){var e=e||window.event;if(e.originalEvent.ctrlKey)return e.originalEvent.wheelDelta>0?o.view.zoomIn():e.originalEvent.wheelDelta<0&&o.view.zoomOut(),!1}).on("click","#resetZoom",function(){o.view.setZoom(1)}).on("click","#logo_icon",function(){return e("#main_menu").animate({width:"620"},200),!1}).on("click","#close_menu",function(e){closeMainMenu()}).on("click","body",function(){closeMainMenu()}).on("click","#main_menu",function(e){e.stopPropagation()}).on("mousedown","#save,#open",function(){return closeMainMenu(),!1}).on("click","#save_confirm",function(){var n=getSelectResult(".option","active");if(0==n)savePng(o);else if(1==n)saveJm(o);else if(-1==n)return void alert("请选择文件类型");e(this).parents(".modal").find(".close").click()}).on("click","#open_confirm",function(){open_file(o)}).on("click",".option",function(){e(this).hasClass("active")?e(this).removeClass("active").find(".option_icon").removeClass("fa-check-square-o").addClass("fa-square-o"):e(this).addClass("active").find(".option_icon").removeClass("fa-square-o").addClass("fa-check-square-o")}).on("dblclick",function(){var e=o.get_selected_node();o.begin_edit(e)})});